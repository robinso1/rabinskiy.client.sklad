# Система управления складом и учета рабочего времени

Система для управления складом, учета рабочего времени и расчета заработной платы с интеграцией с МойСклад.

## Структура проекта

Проект состоит из двух частей:
- `client` - клиентская часть (фронтенд)
- `server` - серверная часть (бэкенд)

## Требования

- Node.js 16+
- MongoDB 4.4+
- Учетная запись МойСклад (для интеграции)

## Установка и запуск

### Серверная часть

1. Перейдите в директорию сервера:
```bash
cd rabinskiy.client.sklad/server
```

2. Установите зависимости:
```bash
npm install
```

3. Создайте файл `.env` в директории сервера со следующими переменными:
```
PORT=5000
MONGODB_URI=mongodb://localhost:27017/rabinskiy-sklad
JWT_SECRET=your_jwt_secret
MOYSKLAD_API_URL=https://online.moysklad.ru/api/remap/1.2
MOYSKLAD_LOGIN=your_login
MOYSKLAD_PASSWORD=your_password
```

4. Запустите сервер в режиме разработки:
```bash
npm run dev
```

### Клиентская часть

1. Перейдите в директорию клиента:
```bash
cd rabinskiy.client.sklad/client
```

2. Установите зависимости:
```bash
npm install
```

3. Создайте файл `.env` в директории клиента со следующими переменными:
```
REACT_APP_API_URL=http://localhost:5000/api
```

4. Запустите клиент в режиме разработки:
```bash
npm start
```

## Загрузка проекта на GitHub

1. Создайте новый репозиторий на GitHub:
   - Перейдите на [github.com](https://github.com)
   - Войдите в свой аккаунт
   - Нажмите на "+" в правом верхнем углу и выберите "New repository"
   - Введите имя репозитория (например, "sklad-system")
   - Добавьте описание (опционально)
   - Выберите публичный или приватный тип репозитория
   - Нажмите "Create repository"

2. Инициализируйте Git в локальном проекте и загрузите его на GitHub:

```bash
# Перейдите в корневую директорию проекта
cd /path/to/project

# Инициализируйте Git репозиторий
git init

# Добавьте все файлы в индекс
git add .

# Создайте первый коммит
git commit -m "Initial commit"

# Добавьте удаленный репозиторий (замените URL на ваш)
git remote add origin https://github.com/ваш-username/sklad-system.git

# Загрузите проект на GitHub
git push -u origin master
```

## Основные функции

- Управление пользователями (администраторы, менеджеры, работники)
- Управление заказами и операциями
- Учет рабочего времени
- Расчет заработной платы
- Управление материалами и техпроцессами
- Интеграция с МойСклад для синхронизации товаров и остатков

## API Endpoints

### Аутентификация
- `POST /api/auth/register` - Регистрация нового пользователя
- `POST /api/auth/login` - Вход в систему

### Пользователи
- `GET /api/users` - Получение списка пользователей
- `GET /api/users/:id` - Получение информации о пользователе
- `PUT /api/users/:id` - Обновление информации о пользователе
- `DELETE /api/users/:id` - Удаление пользователя

### Заказы
- `GET /api/orders` - Получение списка заказов
- `POST /api/orders` - Создание нового заказа
- `GET /api/orders/:id` - Получение информации о заказе
- `PUT /api/orders/:id` - Обновление информации о заказе
- `DELETE /api/orders/:id` - Удаление заказа
- `PATCH /api/orders/:id/status` - Обновление статуса заказа

### Операции
- `GET /api/operations` - Получение списка операций
- `POST /api/operations` - Создание новой операции
- `GET /api/operations/:id` - Получение информации об операции
- `PUT /api/operations/:id` - Обновление информации об операции
- `DELETE /api/operations/:id` - Удаление операции
- `PATCH /api/operations/:id/status` - Обновление статуса операции
- `PATCH /api/operations/:id/assign` - Назначение исполнителя операции

### Учет рабочего времени
- `GET /api/workTime` - Получение записей рабочего времени
- `POST /api/workTime` - Создание новой записи рабочего времени
- `GET /api/workTime/:id` - Получение информации о записи рабочего времени
- `PUT /api/workTime/:id` - Обновление записи рабочего времени
- `DELETE /api/workTime/:id` - Удаление записи рабочего времени
- `PATCH /api/workTime/:id/approve` - Утверждение записи рабочего времени
- `PATCH /api/workTime/:id/unapprove` - Отмена утверждения записи рабочего времени

### Отчеты
- `GET /api/reports/salary` - Получение отчета по заработной плате
- `GET /api/reports/orders` - Получение отчета по заказам

### Интеграция с МойСклад
- `GET /api/moysklad/products` - Получение списка товаров из МойСклад
- `POST /api/moysklad/import/products` - Импорт товаров из МойСклад
- `POST /api/moysklad/sync/stock` - Синхронизация остатков с МойСклад
- `GET /api/moysklad/check-connection` - Проверка соединения с МойСклад

## Решение проблем

### Ошибки TypeScript
Если вы столкнулись с ошибками TypeScript, убедитесь, что:
1. Установлены все необходимые зависимости (`npm install`)
2. Правильно настроен файл tsconfig.json
3. Типы в директории `src/types` соответствуют вашим моделям

### Проблемы с подключением к МойСклад
1. Проверьте правильность учетных данных в файле `.env`
2. Убедитесь, что у вашего аккаунта есть необходимые права доступа
3. Используйте эндпоинт `/api/moysklad/check-connection` для проверки соединения

## Контактная информация

Разработано Артемом.  
Связаться со мной можно там, где вы меня нашли, или в Telegram: [@whazap1](https://t.me/whazap1)

## Лицензия

MIT
